apiVersion: v1
kind: ConfigMap
metadata:
  name: alexander-config
  namespace: alexander
  labels:
    app: alexander-storage
data:
  # Server configuration
  ALEXANDER_SERVER_HOST: "0.0.0.0"
  ALEXANDER_SERVER_PORT: "8080"
  
  # Database configuration
  ALEXANDER_DATABASE_DRIVER: "sqlite"
  ALEXANDER_DATABASE_PATH: "/var/lib/alexander/alexander.db"
  ALEXANDER_DATABASE_JOURNAL_MODE: "WAL"
  ALEXANDER_DATABASE_BUSY_TIMEOUT: "5000"
  ALEXANDER_DATABASE_CACHE_SIZE: "-2000"
  ALEXANDER_DATABASE_SYNCHRONOUS_MODE: "NORMAL"
  
  # Storage configuration
  ALEXANDER_STORAGE_FILESYSTEM_BASE_PATH: "/var/lib/alexander/data"
  
  # Redis configuration (disabled for single-node)
  ALEXANDER_REDIS_ENABLED: "false"
  
  # Metrics configuration
  ALEXANDER_METRICS_ENABLED: "true"
  ALEXANDER_METRICS_PORT: "9091"
  ALEXANDER_METRICS_PATH: "/metrics"
  
  # Rate limiting
  ALEXANDER_RATE_LIMIT_ENABLED: "true"
  ALEXANDER_RATE_LIMIT_REQUESTS_PER_SECOND: "100"
  ALEXANDER_RATE_LIMIT_BURST_SIZE: "200"
  
  # Garbage collection
  ALEXANDER_GC_ENABLED: "true"
  ALEXANDER_GC_INTERVAL: "1h"
  ALEXANDER_GC_GRACE_PERIOD: "24h"
  ALEXANDER_GC_BATCH_SIZE: "1000"
  
  # Logging
  ALEXANDER_LOG_LEVEL: "info"
  ALEXANDER_LOG_FORMAT: "json"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: alexander-config-file
  labels:
    app: alexander-storage
data:
  config.yaml: |
    server:
      host: "0.0.0.0"
      port: 8080
      read_timeout: 30s
      write_timeout: 30s
      idle_timeout: 120s
    
    database:
      driver: sqlite
      path: /var/lib/alexander/alexander.db
      journal_mode: WAL
      busy_timeout: 5000
      cache_size: -2000
      synchronous_mode: NORMAL
    
    storage:
      filesystem:
        base_path: /var/lib/alexander/data
    
    redis:
      enabled: false
    
    metrics:
      enabled: true
      port: 9091
      path: /metrics
    
    rate_limit:
      enabled: true
      requests_per_second: 100
      burst_size: 200
    
    gc:
      enabled: true
      interval: 1h
      grace_period: 24h
      batch_size: 1000
    
    log:
      level: info
      format: json
